
<div>
  <h1>
    Room #<%= @the_room.id %>
  </h1>
</div>

<% if @current_singer.user_id == @current_singer.room.admin_id %>
  <hr>
  <div>
    <h3>
      Tell your fellow singers the following info so that they can join your room:
    </h3>
    <ul>
      <li>
        <b>Room: </b><%= @current_singer.room.id %>
      </li>
      <li>
        <b>Room password: </b><%= @current_singer.room.password %>
      </li>
    </ul>
  </div>
<% end %>

<hr>

<div>
  <h3>
    Search for a song:
  </h3>  
</div>



<%# Copied this from https://developers.google.com/youtube/player_parameters %>
<iframe id="ytplayer" type="text/html" width="640" height="360"
  src= <%= "https://www.youtube.com/embed/" + @youtube_video_id + "?autoplay=" + @autoplay.to_s %>
  frameborder="0"></iframe>

<div>
  <form action= <%="/rooms/#{the_room.id}"%> method="post">
    <input type="hidden" name="query_play_next" value= <%= true %> >
    <button>
      Play next song
    </button>
  </form>
</div>

<hr>

<h3>
  Songs Queue:
</h3>  

<div>
  <div>
    <table>
      <tr>
        <th>
          Name
        </th>

        <th>
          Artist
        </th>

        <th>
          Played
        </th>

        <th>
        </th>
      </tr>

      <% @the_songs_queue.each do |a_next_song| %>
      <tr>
        <td>
          <%= a_next_song.song.name %>
        </td>

        <td>
          <%= a_next_song.song.artist %>
        </td>

        <td>
          <%= a_next_song.played %>
        </td>

        <td>
          <form action= <%="/rooms/#{the_room.id}"%> method="post">
            <input type="hidden" name="query_song_id" value= <%= a_next_song.id %> >
            <button>
              Play this song next
            </button>
          </form>
        </td>
      </tr>
      <% end %>
    </table>
  </div>
</div>


<hr>

<div>
  <div>
    <div>
      <a href="/rooms">
        Go back
      </a>
    </div>

    <div>
      <a href="/delete_room/<%= @the_room.id %>">
        Delete room
      </a>
    </div>
  </div>

  <dl>
    <dt>
      Admin
    </dt>
    <dd>
      <%= @the_room.admin_id %>
    </dd>

    <dt>
      Singers count
    </dt>
    <dd>
      <%= @the_room.singers_count %>
    </dd>

    <dt>
      Created at
    </dt>
    <dd>
      <%= time_ago_in_words(@the_room.created_at) %> ago
    </dd>

    <dt>
      Updated at
    </dt>
    <dd>
      <%= time_ago_in_words(@the_room.updated_at) %> ago
    </dd>
  </dl>
</div>


<hr>


<div>
  <div>
    <h2>
      Edit room
    </h2>

    <form action="/modify_room/<%= @the_room.id %>"  method="post" >
      <div>
        <label for="admin_id_box">
          Admin
        </label>

        <input type="text" id="admin_id_box" name="query_admin_id" value="<%= @the_room.admin_id %>">
      </div>

      <div>
        <label for="singers_count_box">
          Singers count
        </label>

        <input type="text" id="singers_count_box" name="query_singers_count" value="<%= @the_room.singers_count %>">
      </div>

      <button>
        Update room
      </button>
    </form>
  </div>
</div>

<hr>
